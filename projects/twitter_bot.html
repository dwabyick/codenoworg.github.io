
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>TwitterBot - CodeNow Curriculum</title>
  <meta name="author" content="CodeNowOrg">

  
  <meta name="description" content="TwitterBot In this multi-phase project, students will build a client that interacts with the Twitter messaging service. The client will both mimic &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://CodeNowOrg.github.io/projects/twitter_bot.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="CodeNow Curriculum" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">CodeNow Curriculum</a></h1>
  
    <h2>A guide to teaching a CodeNow class.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:CodeNowOrg.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  

<ul class="main-navigation">
  <li><a href="/">Curriculum Index</a></li>
</ul>
</nav>
  <div id="main">
    <div id="content">
      <div>
  <article role="article">
    
    <header>
      
      <h1 class="entry-title">TwitterBot</h1>
      
    </header>
    
    <p>In this multi-phase project, students will build a client that interacts with the Twitter messaging service. The client will both mimic functionality found through the twitter.com web interface as well as perform other more complicated tasks.</p>

<p>Learning Goals:</p>

<ul>
<li>Practice installing and using a gem library</li>
<li>Writing methods and basic instructions</li>
<li>Practice basic techniques including conditional branching and looping</li>
</ul>


<div class="note">
<p>The Twitter API and gem are constantly changing. We do our best to keep this tutorial updated, but sorry if things get confusing.</p>
</div>




<div class="note">
<p>This tutorial is open source. If you notice errors, typos, or have questions/suggestions, please <a href="https://github.com/CodeNowOrg/codenoworg.github.io">submit them to the project on Github</a>.</p>
</div>


<h2>Iteration 0: Up &amp; running</h2>

<p>For Windows machines, we will have to install a valid SSL certificate. Have the students visit the following link: <a href="http://bit.ly/twitterbot-ssl">http://bit.ly/twitterbot-ssl</a>. The code in the gist downloads an SSL certificate onto the laptop. Copy the code, go into IRB, right click the window and select <code>paste</code>. If everything worked correctly, a <code>cacert.pem</code> file will have downloaded into the <code>C:\RailsInstaller</code> folder.</p>

<p>Next, we&rsquo;ll have to set up an environment variable to reference the downloaded certificate. Students can edit the system environment variables by hitting the windows key and typing &ldquo;edit the system environment variables.&rdquo;</p>

<p><img class="center" src="/images/projects/twitter_bot/start_menu.png"></p>

<p>Once they hit enter, they should be brought to the following screen:</p>

<p><img class="center" src="/images/projects/twitter_bot/environment_variables.png"></p>

<p>Click on <code>new</code> to create a new system environment variable. Set the variable name to SSL_CERT_FILE and the variable value to <code>C:\RailsInstaller\cacert.pem</code>:</p>

<p><img class="center" src="/images/projects/twitter_bot/new_environment_variable.png"></p>

<p>Click <code>OK</code> on the windows and open the command prompt.</p>

<p>Install the <code>jumpstart_auth</code> gem by running <code>gem install jumpstart_auth</code> from the command prompt:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">Terminal</h1>
          <div class="container"><div class="terminal"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>$</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
<span class='line-number'>&nbsp;</span>
</pre></td><td class='code'><pre><code><span class='line command'>gem install jumpstart_auth</span><span class='line output'>Fetching: oauth-0.4.7.gem (100%)</span><span class='line output'>Fetching: multipart-post-1.1.5.gem (100%)</span><span class='line output'>Fetching: faraday-0.8.4.gem (100%)</span><span class='line output'>Fetching: simple_oauth-0.1.9.gem (100%)</span><span class='line output'>Fetching: twitter-3.7.0.gem (100%)</span><span class='line output'>Fetching: jumpstart_auth-0.2.0.gem (100%)</span><span class='line output'>Successfully installed oauth-0.4.7</span><span class='line output'>Successfully installed multipart-post-1.1.5</span><span class='line output'>Successfully installed faraday-0.8.4</span><span class='line output'>Successfully installed simple_oauth-0.1.9</span><span class='line output'>Successfully installed twitter-3.7.0</span><span class='line output'>Successfully installed jumpstart_auth-0.2.0</span><span class='line output'>6 gems installed</span></code></pre></td></tr></table></div></div>
        </div>


<p>To verify that we&rsquo;ve set everything up right, have the students open up IRB and run these two instructions:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">IRB</h1>
          <div class="container"><div class="irb"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1.9.2p320 :001&gt;</span>
<span class='line-number'>1.9.2p320 :002&gt;</span>
<span class='line-number'>1.9.2p320 :003&gt;</span>
<span class='line-number'>1.9.2p320 :004&gt;</span>
</pre></td><td class='code'><pre><code><span class='line command'>require 'jumpstart_auth'</span><span class='line command'>=&gt; true</span><span class='line command'>twitter = JumpstartAuth.twitter</span><span class='line command'>=&gt; #&lt;#&lt;Class:0x007fab7ded7990&gt;&gt;</span></code></pre></td></tr></table></div></div>
        </div>


<h3>Dealing with OAuth</h3>

<p>The OAuth authentication system is a complex private/public key exchange that requires several steps and a difficult-to-follow workflow that requires a handshake with the remote service. The JumpstartAuth gem handles this complexity for us. The <code>JumpstartAuth.twitter</code> call initiates the handshake sequence and should open a login screen:</p>

<p><img class="center" src="/images/projects/twitter_bot/twitter_login.png"></p>

<p>We&rsquo;ve setup several test accounts that students can use. Ask Ryan for the username and passwords. Have 2-3 students share a demo account, or login with their own Twitter accounts.</p>

<p>Twitter will then present each user with a 7-digit PIN number. Enter the PIN number into the command prompt to complete the handshake sequence. The JumpstartAuth gem will then create a <code>settings.yml</code> file which will contain the authentication tokens.</p>

<p><img class="center" src="/images/projects/twitter_bot/twitter_pin.png"></p>

<p>With that, we&rsquo;re ready to start coding!</p>

<h2>Iteration 1: Posting tweets</h2>

<p>Have the students navigate to their codenow directory (typically <code>C:\Users\codenow\code</code>) and create a new ruby file using the <code>touch</code> command called <code>twitter_bot.rb</code>.</p>

<h3>Step 1 &ndash; Write the <code>tweet</code> Method</h3>

<p>The JumpstartAuth gem provides convenience methods to easily tweet from a ruby script.
Using <code>irb</code>, show the students how the JumpstartAuth gem works and verify that it is posting to the linked Twitter account:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">IRB</h1>
          <div class="container"><div class="irb"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1.9.2p320 :001&gt;</span>
<span class='line-number'>1.9.2p320 :002&gt;</span>
<span class='line-number'>1.9.2p320 :003&gt;</span>
<span class='line-number'>1.9.2p320 :004&gt;</span>
<span class='line-number'>1.9.2p320 :005&gt;</span>
<span class='line-number'>1.9.2p320 :006&gt;</span>
</pre></td><td class='code'><pre><code><span class='line command'>require 'jumpstart_auth'</span><span class='line command'>=&gt; true</span><span class='line command'>client = JumpstartAuth.twitter</span><span class='line command'>=&gt; #&lt;#&lt;Class:0x007fab7ded7990&gt;&gt;</span><span class='line command'>client.update("I'm tweeting from IRB.")</span><span class='line command'>=&gt; #&lt;Twitter::Tweet:0x007fab79048b08&gt;</span></code></pre></td></tr></table></div></div>
        </div>


<p>We want to encapsulate this functionality into a method called <code>tweet</code> which takes one argument, a message. If students get stuck on defining the method, have them refer to their encryptor programs they wrote in week 2.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;jumpstart_auth&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">tweet</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="n">client</span> <span class="o">=</span> <span class="no">JumpstartAuth</span><span class="o">.</span><span class="n">twitter</span>
</span><span class='line'>  <span class="n">client</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="nb">puts</span> <span class="s2">&quot;Initializing&quot;</span>
</span><span class='line'><span class="n">tweet</span><span class="p">(</span><span class="s2">&quot;TwitterBot Initialized.&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Have the students run their programs. If everything was entered correctly, <code>Initializing</code> should be printed to the terminal and a message should appear on their Twitter stream.</p>

<h3>Step 2 &ndash; Length Restrictions</h3>

<p>Twitter messages are limited to 140 characters. Have the students pass in an string that is longer than 140 characters to the tweet method. Ask the students to describe what happens and tell them we want to  write some code that will prevent users from posting messages longer than 140 characters.</p>

<p>Work with the students to come up with pseudocode for the length-checking functionality:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># If the message to tweet is less than or equal to 140 characters long, tweet it.</span>
</span><span class='line'><span class="c1"># Else, print out a warning message and do not post the tweet.</span>
</span></code></pre></td></tr></table></div></figure>


<p>Remind students about the <code>length</code> method on strings and use irb to show them some examples of how it works. Work with the students to fill in the pseudocode</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># If the message to tweet is less than or equal to 140 characters long, tweet it.</span>
</span><span class='line'><span class="k">if</span> <span class="n">message</span><span class="o">.</span><span class="n">length</span> <span class="o">&lt;=</span> <span class="mi">140</span>
</span><span class='line'>  <span class="n">client</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span class='line'><span class="c1"># Else, print out a warning message and do not post the tweet.</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Message is over 140 characters!&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Test the new <code>tweet</code> method with a message that is less than 140 characters, one that is exactly 140 characters, and one that&rsquo;s longer than 140 characters.</p>

<p>Ask the students how they would generate a string that&rsquo;s exactly 140 characters. They are familiar with the <code>*</code> operator for strings. Show them how the <code>*</code> works in <code>irb</code>:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">IRB</h1>
          <div class="container"><div class="irb"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1.9.2p320 :001&gt;</span>
<span class='line-number'>1.9.2p320 :002&gt;</span>
</pre></td><td class='code'><pre><code><span class='line command'>puts "a" * 10</span><span class='line command'>=&gt; "aaaaaaaaaa"</span></code></pre></td></tr></table></div></div>
        </div>


<h2>Iteration 2: Improving the interface</h2>

<p>Point out that every time they want to change their tweet, they have to edit their Ruby file. Ask the students for suggestions on how they can make their programs better. Explain how an interactive command-line prompt interface (like <code>irb</code>) would be better.</p>

<h3>Step 1 &ndash; Writing the while loop</h3>

<p>Underneath the <code>tweet</code> method we&rsquo;ll want to use a <code>while</code> loop to repeat instructions over and over. Remind the students that there are three parts to the while loop: the begin, the end, and the condition. Replace the last lines of the <code>twitter_bot.rb</code> as such:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;jumpstart_auth&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">tweet</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="n">client</span> <span class="o">=</span> <span class="no">JumpstartAuth</span><span class="o">.</span><span class="n">twitter</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">message</span><span class="o">.</span><span class="n">length</span> <span class="o">&lt;=</span> <span class="mi">140</span>
</span><span class='line'>    <span class="n">client</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Message is over 140 characters!&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">begin</span>
</span><span class='line'>  <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Please enter a command: &quot;</span>
</span><span class='line'><span class="k">end</span> <span class="k">while</span> <span class="n">command</span> <span class="o">!=</span> <span class="s2">&quot;q&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Have the students run their programs and ask what happens and have them explain the output. Show them that <code>ctrl + c</code> will break out of their infinite loop.</p>

<h3>Step 2 &ndash; Getting user input</h3>

<p>Students have already seen the <code>gets</code> command in their first week. If they can&rsquo;t remember how to get user input, have them look at their Hi-Lo game and their Rock, Paper, Scissors game for hints. They should modify their while loops to look as follows:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">begin</span>
</span><span class='line'>  <span class="n">command</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Please enter a command: &quot;</span>
</span><span class='line'><span class="k">end</span> <span class="k">while</span> <span class="n">command</span> <span class="o">!=</span> <span class="s2">&quot;q&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Have the students run their programs to ensure that their code is in a working state. Ask them what happens this time and why the program is different.</p>

<p>Ask students to explain why we need to call the <code>chomp</code> method on the gets. Remind students that <code>gets</code> picks up the enter key too. So the <code>command</code> variable is actually getting the string <code>"q\n"</code> where that backslash-n is a new line. The <code>chomp</code> method will remove any whitespace (spaces, tabs, newlines) on the back end of a string.</p>

<h3>Step 3 &ndash; Building if/else statements</h3>

<p>We think we&rsquo;re getting the instruction from the user, but we need to actually do something with it. We can use if/else statements to process the commands. Work with the students to come up with a simple structure to handle the q command:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;q&quot;</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Goodbye!&quot;</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Sorry, I don&#39;t know how to </span><span class="si">#{</span><span class="n">command</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Have the students run their programs and test some commands.</p>

<h3>Step 4 &ndash; Tweeting and arguments</h3>

<p>Work with the students to modify the if/else structure to work with the tweet method. Add a <code>elsif</code> block that executes when the <code>command</code> is <code>"t"</code>. Have it call our <code>tweet</code> method.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;q&quot;</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Goodbye!&quot;</span>
</span><span class='line'><span class="k">elsif</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;t&quot;</span>
</span><span class='line'>  <span class="n">tweet</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Sorry, I don&#39;t know how to </span><span class="si">#{</span><span class="n">command</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Have the students run their programs and try entering <code>t This is only a test!</code>.</p>

<p>Students should see, <code>Sorry, I don't know how to (t This is only a test!)</code>. Ask the class why the message wasn&rsquo;t tweeted.</p>

<h3>Step 5 &ndash; Splitting the command</h3>

<p>The line <code>command = gets.chomp</code> is an example of bad variable naming. It isn&rsquo;t just getting the <code>command</code>, it&rsquo;s actually getting a <code>command</code> and a message to send to that command. Have the class change this line to <code>input = gets.chomp</code> then we&rsquo;ll work with <code>input</code> to pull out the command.</p>

<p>Now that we have <code>input</code> we need to split it up into pieces. Demonstrate how the <code>split</code> method works with some simple examples in <code>irb</code>. Just below the <code>input = gets.chomp</code> add a line that says <code>parts = input.split(" ")</code> to chop <code>input</code> into <code>parts</code>.</p>

<p>Remind the students how to access elements inside of an array. Show them how we can use ranges to access multiple elements and have them attempt to set two variables called <code>command</code> and <code>message</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;jumpstart_auth&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">tweet</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="n">client</span> <span class="o">=</span> <span class="no">JumpstartAuth</span><span class="o">.</span><span class="n">twitter</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">message</span><span class="o">.</span><span class="n">length</span> <span class="o">&lt;=</span> <span class="mi">140</span>
</span><span class='line'>    <span class="n">client</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Message is over 140 characters!&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">begin</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Please enter a command: &quot;</span>
</span><span class='line'>  <span class="n">input</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span>
</span><span class='line'>  <span class="n">parts</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">command</span> <span class="o">=</span> <span class="n">parts</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;q&quot;</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Goodbye!&quot;</span>
</span><span class='line'>  <span class="k">elsif</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;t&quot;</span>
</span><span class='line'>    <span class="n">message</span> <span class="o">=</span> <span class="n">parts</span><span class="o">[</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">1</span><span class="o">].</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">tweet</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Sorry, I don&#39;t know how to </span><span class="si">#{</span><span class="n">command</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span> <span class="k">while</span> <span class="n">command</span> <span class="o">!=</span> <span class="s2">&quot;q&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Have the class try out their programs to test sending multiple tweets. At this point, it&rsquo;s possible that they will exceed the Twitter API rate limits. If that is the case, have them either create new accounts or wait a few minutes for Twitter to restore their access.</p>

<h2>Iteration 3: Direct messaging</h2>

<p>We want to increase the functionality of our Twitter bot by giving it the ability to send our followers private messages. Sending these Direct Messages isn&rsquo;t that different from posting tweets. In fact, we can reuse our existing <code>tweet</code> method to do most of the hard work.</p>

<h3>Step 0 &ndash; Writing the dm method</h3>

<p>Explain to the students that we want to package the direct message functionality into a method. Have them attempt to write a method called <code>dm</code> that takes two arguments, a twitter handle, and a message, and prints them to the screen. It should look as follows:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">dm</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Trying to send </span><span class="si">#{</span><span class="n">target</span><span class="si">}</span><span class="s2"> this direct message:&quot;</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="n">message</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>In order to test the method, have the students copy the method directly into <code>irb</code> and have them call the method.</p>

<h3>Step 1 &ndash; Incorporating the dm method</h3>

<p>And we need to add the command to our while loop. Ask the students how they would expect the dm call to work. Guide them towards inputting something like: <code>dm user_name text of the message</code>. Have them attempt to write the new if statement. It should look as follows:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">begin</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Please enter a command: &quot;</span>
</span><span class='line'>  <span class="n">input</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span>
</span><span class='line'>  <span class="n">parts</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">command</span> <span class="o">=</span> <span class="n">parts</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;q&quot;</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Goodbye!&quot;</span>
</span><span class='line'>  <span class="k">elsif</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;t&quot;</span>
</span><span class='line'>    <span class="n">message</span> <span class="o">=</span> <span class="n">parts</span><span class="o">[</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">1</span><span class="o">].</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">tweet</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="k">elsif</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;dm&quot;</span>
</span><span class='line'>    <span class="n">target</span> <span class="o">=</span> <span class="n">parts</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span>
</span><span class='line'>    <span class="n">message</span> <span class="o">=</span> <span class="n">parts</span><span class="o">[</span><span class="mi">2</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">1</span><span class="o">].</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">dm</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Sorry, I don&#39;t know how to </span><span class="si">#{</span><span class="n">command</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span> <span class="k">while</span> <span class="n">command</span> <span class="o">!=</span> <span class="s2">&quot;q&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Step 2 &ndash; Creating and sending the message</h3>

<p>In order to direct message someone using the JumpstartAuth gem, we simply use the <code>update</code> method with a message that starts with &ldquo;d user_name&rdquo;. Have the students test the direct messaging functionality in irb.</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">IRB</h1>
          <div class="container"><div class="irb"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1.9.2p320 :001&gt;</span>
<span class='line-number'>1.9.2p320 :002&gt;</span>
<span class='line-number'>1.9.2p320 :003&gt;</span>
<span class='line-number'>1.9.2p320 :004&gt;</span>
</pre></td><td class='code'><pre><code><span class='line command'>client = JumpstartAuth.twitter</span><span class='line command'>=&gt; #&lt;#&lt;Class:0x007fe9c8e5fa88&gt;:0x007fe9c8ec18c8&gt;</span><span class='line command'>client.update("d jsl_demo_01 Hello, world.")</span><span class='line command'>=&gt; #&lt;Twitter::DirectMessage:0x007fe9c8eb8520&gt;</span></code></pre></td></tr></table></div></div>
        </div>


<p>Ask the students how we can use the <code>tweet</code> method in order to send our direct messages. Have the students work together to modify the <code>dm</code> method to use the <code>tweet</code> method. Remind them about string interpolation. The resulting method should look as follows:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">dm</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="n">tweet</span><span class="p">(</span><span class="s2">&quot;d </span><span class="si">#{</span><span class="n">target</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Have the students try sending a direct message to other demo accounts. If the DM doesn&rsquo;t show up it is probably because DMs can only be sent to people who are following the account. Have the recipient follow the sender and try again.</p>

<h2>Iteration 4: Writing a spam bot</h2>

<h3>Step 1 &ndash; Getting a list of followers</h3>

<p>We want to create a method named <code>followers_list</code> that returns an array containing the usernames of all my followers</p>

<p>The JumpstartAuth gem provides a method <code>followers</code> that returns an array of followers for a given account. The follower objects behave much like hashes. Walk through a simple example with the class:</p>

<div class="window">
          <nav class="control-window">
            <a href="#finder" class="close" data-rel="close">close</a>
            <a href="#" class="minimize">minimize</a>
            <a href="#" class="deactivate">deactivate</a>
          </nav>
          <h1 class="titleInside">IRB</h1>
          <div class="container"><div class="irb"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1.9.2p320 :001&gt;</span>
<span class='line-number'>1.9.2p320 :002&gt;</span>
<span class='line-number'>1.9.2p320 :003&gt;</span>
<span class='line-number'>1.9.2p320 :004&gt;</span>
<span class='line-number'>1.9.2p320 :005&gt;</span>
<span class='line-number'>1.9.2p320 :006&gt;</span>
<span class='line-number'>1.9.2p320 :007&gt;</span>
<span class='line-number'>1.9.2p320 :008&gt;</span>
</pre></td><td class='code'><pre><code><span class='line command'>client = JumpstartAuth.twitter</span><span class='line command'>=&gt; #&lt;#&lt;Class:0x007fe9c8e5fa88&gt;:0x007fe9c8ec18c8&gt;</span><span class='line command'>followers = client.followers</span><span class='line command'>=&gt; [ #&lt;Twitter::User:0x007fba710863c0&gt;, #&lt;Twitter::User:0x007fba71086230&gt;, #&lt;$ Twitter::User:0x007fba71086280&gt;, ... ]</span><span class='line command'>follower = followers[0]</span><span class='line command'>=&gt; #&lt;Twitter::User:0x007fba710863c0&gt;</span><span class='line command'>follower["screen_name"]</span><span class='line command'>=&gt; "jsl_demo_06"</span></code></pre></td></tr></table></div></div>
        </div>


<p>Work with the class to sketch out some pseudocode for the <code>followers_list</code> method:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># Define a method called `followers_list` that takes no parameters</span>
</span><span class='line'><span class="c1"># Create a `client` variable and set it to the JumpstartAuth client</span>
</span><span class='line'><span class="c1"># Create a `screen_names` variable and set it to a blank array</span>
</span><span class='line'><span class="c1"># Create a `followers` variable and set it to the followers</span>
</span><span class='line'><span class="c1"># Iterate through the `followers` using an each loop and `push` screen names into the array</span>
</span><span class='line'><span class="c1"># Return the `screen_names` variable</span>
</span></code></pre></td></tr></table></div></figure>


<p>Have students work together to write out the <code>followers_list</code> method. Challenge the class to write an each loop to get all of the screen names of their followers. If they get stuck, have them refer to their encryptor programs they built in Week 2. It should look as follows:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># Define a method called `followers_list` that takes no arguments</span>
</span><span class='line'><span class="k">def</span> <span class="nf">followers_list</span>
</span><span class='line'>  <span class="c1"># Create a `client` variable and set it to the JumpstartAuth client</span>
</span><span class='line'>  <span class="n">client</span> <span class="o">=</span> <span class="no">JumpstartAuth</span><span class="o">.</span><span class="n">twitter</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Create a `screen_names` variable and set it to a blank array</span>
</span><span class='line'>  <span class="n">screen_names</span> <span class="o">=</span> <span class="o">[]</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Create a `followers` variable and set it to the client&#39;s followers</span>
</span><span class='line'>  <span class="n">followers</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">followers</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Iterate through the `followers` using an each loop and `push` screen names into the array</span>
</span><span class='line'>  <span class="n">followers</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">follower</span><span class="o">|</span>
</span><span class='line'>    <span class="n">screen_names</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">follower</span><span class="o">[</span><span class="s2">&quot;screen_name&quot;</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Return the `screen_names` variable</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">screen_names</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Step 2 &ndash; Direct messaging all followers</h3>

<p>Next, we need to write a method named <code>spam_my_followers</code> that uses the followers_list and tries to send them a direct message using the <code>dm</code> method</p>

<p>We&rsquo;ll again start off by writing some pseudo code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># Define a method called `spam_my_followers` that takes one argument named `message`</span>
</span><span class='line'><span class="c1"># Use the `followers_list` method to retrieve a list of followers and save that in a variable called `screen_names`</span>
</span><span class='line'><span class="c1"># Loop through the `screen_names` variable using an `each` loop</span>
</span><span class='line'><span class="c1"># Use the `dm` method to send them a message</span>
</span></code></pre></td></tr></table></div></figure>


<p>Work with the class to fill in the pseudocode.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># Define a method called `spam_my_followers` that takes one argument named `message`</span>
</span><span class='line'><span class="k">def</span> <span class="nf">spam_my_followers</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="c1"># Use the `followers_list` method to retrieve a list of followers and save that in a variable called `screen_names`</span>
</span><span class='line'>  <span class="n">screen_names</span> <span class="o">=</span> <span class="n">followers_list</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Loop through the `screen_names` variable using an `each` loop</span>
</span><span class='line'>  <span class="n">screen_names</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">screen_name</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Use the `dm` method to send them the `message` argument</span>
</span><span class='line'>    <span class="n">dm</span><span class="p">(</span><span class="n">screen_name</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>We want to be able to execute the spam functionality from our command-line interface. Ideally, we&rsquo;d like to be able to type in <code>s some_message</code> and have it spam &ldquo;some_message&rdquo; to all of our followers. Have the class implement this functionality, and have them test it out to make sure that it works.</p>

<p>Here&rsquo;s what the full script should look like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;jumpstart_auth&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">tweet</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="n">client</span> <span class="o">=</span> <span class="no">JumpstartAuth</span><span class="o">.</span><span class="n">twitter</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">message</span><span class="o">.</span><span class="n">length</span> <span class="o">&lt;=</span> <span class="mi">140</span>
</span><span class='line'>    <span class="n">client</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Message is over 140 characters!&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">dm</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="n">tweet</span><span class="p">(</span><span class="s2">&quot;d </span><span class="si">#{</span><span class="n">target</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">followers_list</span>
</span><span class='line'>  <span class="n">client</span> <span class="o">=</span> <span class="no">JumpstartAuth</span><span class="o">.</span><span class="n">twitter</span>
</span><span class='line'>  <span class="n">screen_names</span> <span class="o">=</span> <span class="o">[]</span>
</span><span class='line'>  <span class="n">followers</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">followers</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">followers</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">follower</span><span class="o">|</span>
</span><span class='line'>    <span class="n">screen_names</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">follower</span><span class="o">[</span><span class="s2">&quot;screen_name&quot;</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="n">screen_names</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">spam_my_followers</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="n">screen_names</span> <span class="o">=</span> <span class="n">followers_list</span>
</span><span class='line'>  <span class="n">screen_names</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">screen_name</span><span class="o">|</span>
</span><span class='line'>    <span class="n">dm</span><span class="p">(</span><span class="n">screen_name</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">begin</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Please enter a command: &quot;</span>
</span><span class='line'>  <span class="n">input</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span>
</span><span class='line'>  <span class="n">parts</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">command</span> <span class="o">=</span> <span class="n">parts</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;q&quot;</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Goodbye!&quot;</span>
</span><span class='line'>  <span class="k">elsif</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;t&quot;</span>
</span><span class='line'>    <span class="n">message</span> <span class="o">=</span> <span class="n">parts</span><span class="o">[</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">1</span><span class="o">].</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">tweet</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="k">elsif</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;dm&quot;</span>
</span><span class='line'>    <span class="n">target</span> <span class="o">=</span> <span class="n">parts</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span>
</span><span class='line'>    <span class="n">message</span> <span class="o">=</span> <span class="n">parts</span><span class="o">[</span><span class="mi">2</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">1</span><span class="o">].</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">dm</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="k">elsif</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;s&quot;</span>
</span><span class='line'>    <span class="n">message</span> <span class="o">=</span> <span class="n">parts</span><span class="o">[</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">1</span><span class="o">].</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">spam_my_followers</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Sorry, I don&#39;t know how to </span><span class="si">#{</span><span class="n">command</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span> <span class="k">while</span> <span class="n">command</span> <span class="o">!=</span> <span class="s2">&quot;q&quot;</span>
</span></code></pre></td></tr></table></div></figure>


    
      <footer>
        
        
          <div class="sharing">
  
  
  
</div>

        
      </footer>
    
  </article>


</div>


  <span class="toggle-sidebar"></span>

<aside class="sidebar">
  <div> </div>
</aside>

<script src="/javascripts/sidebar.js" type="text/javascript"> </script>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - CodeNowOrg -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

<script>
  //Super secure password protection version 42.93438
  //Ryan wanted a password protection so that students can't just go on the
  //curriculum page and read the answers. Unfortunately we're hosting things
  //on github right now, so we can't do any form of real password protection :(
  //But basic Javascript is enough for now.
  //
  //If you are a student and you figure this out...rock on!
  if (! document.cookie){
     window.document.body.style.display = 'none';
     var password = prompt("Password?");
  }

  if ( btoa(password) == 'YzBkZW4wdyExMjQ=' ){
     window.document.body.style.display = 'block';
     document.cookie = 'authed=true; expires=31 Dec 2020 00:00:00 GMT';
  }
</script>

</footer>
  











</body>
</html>
